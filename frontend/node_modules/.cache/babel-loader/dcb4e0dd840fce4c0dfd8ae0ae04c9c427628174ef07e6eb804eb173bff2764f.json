{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport { fromBase64 } from \"@aws-sdk/util-base64-browser\";\nexport var streamCollector = function (stream) {\n  if (typeof Blob === \"function\" && stream instanceof Blob) {\n    return collectBlob(stream);\n  }\n  return collectStream(stream);\n};\nfunction collectBlob(blob) {\n  return __awaiter(this, void 0, void 0, function () {\n    var base64, arrayBuffer;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          return [4, readToBase64(blob)];\n        case 1:\n          base64 = _a.sent();\n          arrayBuffer = fromBase64(base64);\n          return [2, new Uint8Array(arrayBuffer)];\n      }\n    });\n  });\n}\nfunction collectStream(stream) {\n  return __awaiter(this, void 0, void 0, function () {\n    var res, reader, isDone, _a, done, value, prior;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          res = new Uint8Array(0);\n          reader = stream.getReader();\n          isDone = false;\n          _b.label = 1;\n        case 1:\n          if (!!isDone) return [3, 3];\n          return [4, reader.read()];\n        case 2:\n          _a = _b.sent(), done = _a.done, value = _a.value;\n          if (value) {\n            prior = res;\n            res = new Uint8Array(prior.length + value.length);\n            res.set(prior);\n            res.set(value, prior.length);\n          }\n          isDone = done;\n          return [3, 1];\n        case 3:\n          return [2, res];\n      }\n    });\n  });\n}\nfunction readToBase64(blob) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      var _a;\n      if (reader.readyState !== 2) {\n        return reject(new Error(\"Reader aborted too early\"));\n      }\n      var result = (_a = reader.result) !== null && _a !== void 0 ? _a : \"\";\n      var commaIndex = result.indexOf(\",\");\n      var dataOffset = commaIndex > -1 ? commaIndex + 1 : result.length;\n      resolve(result.substring(dataOffset));\n    };\n    reader.onabort = function () {\n      return reject(new Error(\"Read aborted\"));\n    };\n    reader.onerror = function () {\n      return reject(reader.error);\n    };\n    reader.readAsDataURL(blob);\n  });\n}","map":{"version":3,"names":["__awaiter","__generator","fromBase64","streamCollector","stream","Blob","collectBlob","collectStream","blob","base64","arrayBuffer","_a","label","readToBase64","sent","Uint8Array","res","reader","isDone","done","value","prior","_b","getReader","read","length","set","Promise","resolve","reject","FileReader","onloadend","readyState","Error","result","commaIndex","indexOf","dataOffset","substring","onabort","onerror","error","readAsDataURL"],"sources":["/Users/yannellym/Desktop/iwantapet/node_modules/@aws-sdk/client-location/node_modules/@aws-sdk/fetch-http-handler/dist-es/stream-collector.js"],"sourcesContent":["import { __awaiter, __generator } from \"tslib\";\nimport { fromBase64 } from \"@aws-sdk/util-base64-browser\";\nexport var streamCollector = function (stream) {\n    if (typeof Blob === \"function\" && stream instanceof Blob) {\n        return collectBlob(stream);\n    }\n    return collectStream(stream);\n};\nfunction collectBlob(blob) {\n    return __awaiter(this, void 0, void 0, function () {\n        var base64, arrayBuffer;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, readToBase64(blob)];\n                case 1:\n                    base64 = _a.sent();\n                    arrayBuffer = fromBase64(base64);\n                    return [2, new Uint8Array(arrayBuffer)];\n            }\n        });\n    });\n}\nfunction collectStream(stream) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, reader, isDone, _a, done, value, prior;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    res = new Uint8Array(0);\n                    reader = stream.getReader();\n                    isDone = false;\n                    _b.label = 1;\n                case 1:\n                    if (!!isDone) return [3, 3];\n                    return [4, reader.read()];\n                case 2:\n                    _a = _b.sent(), done = _a.done, value = _a.value;\n                    if (value) {\n                        prior = res;\n                        res = new Uint8Array(prior.length + value.length);\n                        res.set(prior);\n                        res.set(value, prior.length);\n                    }\n                    isDone = done;\n                    return [3, 1];\n                case 3: return [2, res];\n            }\n        });\n    });\n}\nfunction readToBase64(blob) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n            var _a;\n            if (reader.readyState !== 2) {\n                return reject(new Error(\"Reader aborted too early\"));\n            }\n            var result = ((_a = reader.result) !== null && _a !== void 0 ? _a : \"\");\n            var commaIndex = result.indexOf(\",\");\n            var dataOffset = commaIndex > -1 ? commaIndex + 1 : result.length;\n            resolve(result.substring(dataOffset));\n        };\n        reader.onabort = function () { return reject(new Error(\"Read aborted\")); };\n        reader.onerror = function () { return reject(reader.error); };\n        reader.readAsDataURL(blob);\n    });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}