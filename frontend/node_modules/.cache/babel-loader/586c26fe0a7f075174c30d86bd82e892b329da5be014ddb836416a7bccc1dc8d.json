{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { __read } from \"tslib\";\nimport { Amplify, ConsoleLogger, Hub } from '@aws-amplify/core';\nimport isEmpty from 'lodash/isEmpty';\nimport { AMPLIFY_SYMBOL } from '../../../common';\nvar DELIVERY_TYPE = 'IN_APP_MESSAGE';\nvar eventNameMemo = {};\nvar eventAttributesMemo = {};\nvar eventMetricsMemo = {};\nexport var logger = new ConsoleLogger('InAppMessaging.AWSPinpointProvider');\nexport var dispatchInAppMessagingEvent = function (event, data, message) {\n  Hub.dispatch('inAppMessaging', {\n    event: event,\n    data: data,\n    message: message\n  }, 'InAppMessaging', AMPLIFY_SYMBOL);\n};\nexport var recordAnalyticsEvent = function (event, message) {\n  if (Amplify.Analytics && typeof Amplify.Analytics.record === 'function') {\n    var id = message.id,\n      metadata = message.metadata;\n    Amplify.Analytics.record({\n      name: event,\n      attributes: {\n        campaign_id: id,\n        delivery_type: DELIVERY_TYPE,\n        treatment_id: metadata === null || metadata === void 0 ? void 0 : metadata.treatmentId\n      }\n    });\n  } else {\n    logger.debug('Analytics module is not registered into Amplify');\n  }\n};\nexport var getStartOfDay = function () {\n  var now = new Date();\n  now.setHours(0, 0, 0, 0);\n  return now.toISOString();\n};\nexport var matchesEventType = function (_a, _b) {\n  var CampaignId = _a.CampaignId,\n    Schedule = _a.Schedule;\n  var eventType = _b.name;\n  var _c;\n  var EventType = ((_c = Schedule === null || Schedule === void 0 ? void 0 : Schedule.EventFilter) === null || _c === void 0 ? void 0 : _c.Dimensions).EventType;\n  var memoKey = CampaignId + \":\" + eventType;\n  if (!eventNameMemo.hasOwnProperty(memoKey)) {\n    eventNameMemo[memoKey] = !!(EventType === null || EventType === void 0 ? void 0 : EventType.Values.includes(eventType));\n  }\n  return eventNameMemo[memoKey];\n};\nexport var matchesAttributes = function (_a, _b) {\n  var CampaignId = _a.CampaignId,\n    Schedule = _a.Schedule;\n  var attributes = _b.attributes;\n  var _c;\n  var Attributes = ((_c = Schedule === null || Schedule === void 0 ? void 0 : Schedule.EventFilter) === null || _c === void 0 ? void 0 : _c.Dimensions).Attributes;\n  if (isEmpty(Attributes)) {\n    // if message does not have attributes defined it does not matter what attributes are on the event\n    return true;\n  }\n  if (isEmpty(attributes)) {\n    // if message does have attributes but the event does not then it always fails the check\n    return false;\n  }\n  var memoKey = CampaignId + \":\" + JSON.stringify(attributes);\n  if (!eventAttributesMemo.hasOwnProperty(memoKey)) {\n    eventAttributesMemo[memoKey] = Object.entries(Attributes).every(function (_a) {\n      var _b = __read(_a, 2),\n        key = _b[0],\n        Values = _b[1].Values;\n      return Values.includes(attributes[key]);\n    });\n  }\n  return eventAttributesMemo[memoKey];\n};\nexport var matchesMetrics = function (_a, _b) {\n  var CampaignId = _a.CampaignId,\n    Schedule = _a.Schedule;\n  var metrics = _b.metrics;\n  var _c;\n  var Metrics = ((_c = Schedule === null || Schedule === void 0 ? void 0 : Schedule.EventFilter) === null || _c === void 0 ? void 0 : _c.Dimensions).Metrics;\n  if (isEmpty(Metrics)) {\n    // if message does not have metrics defined it does not matter what metrics are on the event\n    return true;\n  }\n  if (isEmpty(metrics)) {\n    // if message does have metrics but the event does not then it always fails the check\n    return false;\n  }\n  var memoKey = CampaignId + \":\" + JSON.stringify(metrics);\n  if (!eventMetricsMemo.hasOwnProperty(memoKey)) {\n    eventMetricsMemo[memoKey] = Object.entries(Metrics).every(function (_a) {\n      var _b = __read(_a, 2),\n        key = _b[0],\n        _c = _b[1],\n        ComparisonOperator = _c.ComparisonOperator,\n        Value = _c.Value;\n      var compare = getComparator(ComparisonOperator);\n      // if there is some unknown comparison operator, treat as a comparison failure\n      return compare ? compare(Value, metrics[key]) : false;\n    });\n  }\n  return eventMetricsMemo[memoKey];\n};\nexport var getComparator = function (operator) {\n  switch (operator) {\n    case 'EQUAL':\n      return function (metricsVal, eventVal) {\n        return metricsVal === eventVal;\n      };\n    case 'GREATER_THAN':\n      return function (metricsVal, eventVal) {\n        return metricsVal < eventVal;\n      };\n    case 'GREATER_THAN_OR_EQUAL':\n      return function (metricsVal, eventVal) {\n        return metricsVal <= eventVal;\n      };\n    case 'LESS_THAN':\n      return function (metricsVal, eventVal) {\n        return metricsVal > eventVal;\n      };\n    case 'LESS_THAN_OR_EQUAL':\n      return function (metricsVal, eventVal) {\n        return metricsVal >= eventVal;\n      };\n    default:\n      return null;\n  }\n};\nexport var isBeforeEndDate = function (_a) {\n  var Schedule = _a.Schedule;\n  if (!(Schedule === null || Schedule === void 0 ? void 0 : Schedule.EndDate)) {\n    return true;\n  }\n  return new Date() < new Date(Schedule.EndDate);\n};\nexport var isQuietTime = function (message) {\n  var Schedule = message.Schedule;\n  if (!(Schedule === null || Schedule === void 0 ? void 0 : Schedule.QuietTime)) {\n    return false;\n  }\n  var pattern = /^[0-2]\\d:[0-5]\\d$/; // basic sanity check, not a fully featured HH:MM validation\n  var _a = Schedule.QuietTime,\n    Start = _a.Start,\n    End = _a.End;\n  if (!Start || !End || Start === End || !pattern.test(Start) || !pattern.test(End)) {\n    return false;\n  }\n  var now = new Date();\n  var start = new Date(now);\n  var end = new Date(now);\n  var _b = __read(Start.split(':'), 2),\n    startHours = _b[0],\n    startMinutes = _b[1];\n  var _c = __read(End.split(':'), 2),\n    endHours = _c[0],\n    endMinutes = _c[1];\n  start.setHours(Number.parseInt(startHours, 10), Number.parseInt(startMinutes, 10), 0, 0);\n  end.setHours(Number.parseInt(endHours, 10), Number.parseInt(endMinutes, 10), 0, 0);\n  // if quiet time includes midnight, bump the end time to the next day\n  if (start > end) {\n    end.setDate(end.getDate() + 1);\n  }\n  var isQuietTime = now >= start && now <= end;\n  if (isQuietTime) {\n    logger.debug('message filtered due to quiet time', message);\n  }\n  return isQuietTime;\n};\nexport var clearMemo = function () {\n  eventNameMemo = {};\n  eventAttributesMemo = {};\n  eventMetricsMemo = {};\n};\n// in the pinpoint console when a message is created with a Modal or Full Screen layout,\n// it is assigned a layout value of MOBILE_FEED or OVERLAYS respectively in the message payload.\n// In the future, Pinpoint will be updating the layout values in the aforementioned scenario\n// to MODAL and FULL_SCREEN.\n//\n// This utility acts as a safeguard to ensure that:\n// - 1. the usage of MOBILE_FEED and OVERLAYS as values for message layouts are not leaked\n//      outside the Pinpoint provider\n// - 2. Amplify correctly handles the legacy layout values from Pinpoint after they are updated\nexport var interpretLayout = function (layout) {\n  if (layout === 'MOBILE_FEED') {\n    return 'MODAL';\n  }\n  if (layout === 'OVERLAYS') {\n    return 'FULL_SCREEN';\n  }\n  // cast as PinpointInAppMessage['InAppMessage']['Layout'] allows `string` as a value\n  return layout;\n};\nexport var extractContent = function (_a) {\n  var message = _a.InAppMessage;\n  var _b, _c;\n  return (_c = (_b = message === null || message === void 0 ? void 0 : message.Content) === null || _b === void 0 ? void 0 : _b.map(function (content) {\n    var BackgroundColor = content.BackgroundColor,\n      BodyConfig = content.BodyConfig,\n      HeaderConfig = content.HeaderConfig,\n      ImageUrl = content.ImageUrl,\n      PrimaryBtn = content.PrimaryBtn,\n      SecondaryBtn = content.SecondaryBtn;\n    var defaultPrimaryButton = PrimaryBtn === null || PrimaryBtn === void 0 ? void 0 : PrimaryBtn.DefaultConfig;\n    var defaultSecondaryButton = SecondaryBtn === null || SecondaryBtn === void 0 ? void 0 : SecondaryBtn.DefaultConfig;\n    var extractedContent = {};\n    if (BackgroundColor) {\n      extractedContent.container = {\n        style: {\n          backgroundColor: BackgroundColor\n        }\n      };\n    }\n    if (HeaderConfig) {\n      extractedContent.header = {\n        content: HeaderConfig.Header,\n        style: {\n          color: HeaderConfig.TextColor,\n          textAlign: HeaderConfig.Alignment.toLowerCase()\n        }\n      };\n    }\n    if (BodyConfig) {\n      extractedContent.body = {\n        content: BodyConfig.Body,\n        style: {\n          color: BodyConfig.TextColor,\n          textAlign: BodyConfig.Alignment.toLowerCase()\n        }\n      };\n    }\n    if (ImageUrl) {\n      extractedContent.image = {\n        src: ImageUrl\n      };\n    }\n    if (defaultPrimaryButton) {\n      extractedContent.primaryButton = {\n        title: defaultPrimaryButton.Text,\n        action: defaultPrimaryButton.ButtonAction,\n        url: defaultPrimaryButton.Link,\n        style: {\n          backgroundColor: defaultPrimaryButton.BackgroundColor,\n          borderRadius: defaultPrimaryButton.BorderRadius,\n          color: defaultPrimaryButton.TextColor\n        }\n      };\n    }\n    if (defaultSecondaryButton) {\n      extractedContent.secondaryButton = {\n        title: defaultSecondaryButton.Text,\n        action: defaultSecondaryButton.ButtonAction,\n        url: defaultSecondaryButton.Link,\n        style: {\n          backgroundColor: defaultSecondaryButton.BackgroundColor,\n          borderRadius: defaultSecondaryButton.BorderRadius,\n          color: defaultSecondaryButton.TextColor\n        }\n      };\n    }\n    return extractedContent;\n  })) !== null && _c !== void 0 ? _c : [];\n};\nexport var extractMetadata = function (_a) {\n  var InAppMessage = _a.InAppMessage,\n    Priority = _a.Priority,\n    Schedule = _a.Schedule,\n    TreatmentId = _a.TreatmentId;\n  return {\n    customData: InAppMessage === null || InAppMessage === void 0 ? void 0 : InAppMessage.CustomConfig,\n    endDate: Schedule === null || Schedule === void 0 ? void 0 : Schedule.EndDate,\n    priority: Priority,\n    treatmentId: TreatmentId\n  };\n};","map":{"version":3,"names":["Amplify","ConsoleLogger","Hub","isEmpty","AMPLIFY_SYMBOL","DELIVERY_TYPE","eventNameMemo","eventAttributesMemo","eventMetricsMemo","logger","dispatchInAppMessagingEvent","event","data","message","dispatch","recordAnalyticsEvent","Analytics","record","id","metadata","name","attributes","campaign_id","delivery_type","treatment_id","treatmentId","debug","getStartOfDay","now","Date","setHours","toISOString","matchesEventType","_a","_b","CampaignId","Schedule","eventType","EventType","_c","EventFilter","Dimensions","memoKey","hasOwnProperty","Values","includes","matchesAttributes","Attributes","JSON","stringify","Object","entries","every","__read","key","matchesMetrics","metrics","Metrics","ComparisonOperator","Value","compare","getComparator","operator","metricsVal","eventVal","isBeforeEndDate","EndDate","isQuietTime","QuietTime","pattern","Start","End","test","start","end","split","startHours","startMinutes","endHours","endMinutes","Number","parseInt","setDate","getDate","clearMemo","interpretLayout","layout","extractContent","InAppMessage","Content","map","content","BackgroundColor","BodyConfig","HeaderConfig","ImageUrl","PrimaryBtn","SecondaryBtn","defaultPrimaryButton","DefaultConfig","defaultSecondaryButton","extractedContent","container","style","backgroundColor","header","Header","color","TextColor","textAlign","Alignment","toLowerCase","body","Body","image","src","primaryButton","title","Text","action","ButtonAction","url","Link","borderRadius","BorderRadius","secondaryButton","extractMetadata","Priority","TreatmentId","customData","CustomConfig","endDate","priority"],"sources":["../../../../src/InAppMessaging/Providers/AWSPinpointProvider/utils.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}