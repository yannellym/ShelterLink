{"ast":null,"code":"import { __awaiter, __generator, __values } from \"tslib\";\nimport { HttpResponse } from \"@aws-sdk/protocol-http\";\nimport { buildQueryString } from \"@aws-sdk/querystring-builder\";\nimport { requestTimeout } from \"./request-timeout\";\nvar FetchHttpHandler = function () {\n  function FetchHttpHandler(options) {\n    if (typeof options === \"function\") {\n      this.configProvider = options().then(function (opts) {\n        return opts || {};\n      });\n    } else {\n      this.config = options !== null && options !== void 0 ? options : {};\n      this.configProvider = Promise.resolve(this.config);\n    }\n  }\n  FetchHttpHandler.prototype.destroy = function () {};\n  FetchHttpHandler.prototype.handle = function (request, _a) {\n    var _b = _a === void 0 ? {} : _a,\n      abortSignal = _b.abortSignal;\n    return __awaiter(this, void 0, void 0, function () {\n      var _c, requestTimeoutInMs, abortError, path, queryString, port, method, url, body, requestOptions, fetchRequest, raceOfPromises;\n      return __generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            if (!!this.config) return [3, 2];\n            _c = this;\n            return [4, this.configProvider];\n          case 1:\n            _c.config = _d.sent();\n            _d.label = 2;\n          case 2:\n            requestTimeoutInMs = this.config.requestTimeout;\n            if (abortSignal === null || abortSignal === void 0 ? void 0 : abortSignal.aborted) {\n              abortError = new Error(\"Request aborted\");\n              abortError.name = \"AbortError\";\n              return [2, Promise.reject(abortError)];\n            }\n            path = request.path;\n            if (request.query) {\n              queryString = buildQueryString(request.query);\n              if (queryString) {\n                path += \"?\".concat(queryString);\n              }\n            }\n            port = request.port, method = request.method;\n            url = \"\".concat(request.protocol, \"//\").concat(request.hostname).concat(port ? \":\".concat(port) : \"\").concat(path);\n            body = method === \"GET\" || method === \"HEAD\" ? undefined : request.body;\n            requestOptions = {\n              body: body,\n              headers: new Headers(request.headers),\n              method: method\n            };\n            if (typeof AbortController !== \"undefined\") {\n              requestOptions[\"signal\"] = abortSignal;\n            }\n            fetchRequest = new Request(url, requestOptions);\n            raceOfPromises = [fetch(fetchRequest).then(function (response) {\n              var e_1, _a;\n              var fetchHeaders = response.headers;\n              var transformedHeaders = {};\n              try {\n                for (var _b = __values(fetchHeaders.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                  var pair = _c.value;\n                  transformedHeaders[pair[0]] = pair[1];\n                }\n              } catch (e_1_1) {\n                e_1 = {\n                  error: e_1_1\n                };\n              } finally {\n                try {\n                  if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                } finally {\n                  if (e_1) throw e_1.error;\n                }\n              }\n              var hasReadableStream = response.body !== undefined;\n              if (!hasReadableStream) {\n                return response.blob().then(function (body) {\n                  return {\n                    response: new HttpResponse({\n                      headers: transformedHeaders,\n                      statusCode: response.status,\n                      body: body\n                    })\n                  };\n                });\n              }\n              return {\n                response: new HttpResponse({\n                  headers: transformedHeaders,\n                  statusCode: response.status,\n                  body: response.body\n                })\n              };\n            }), requestTimeout(requestTimeoutInMs)];\n            if (abortSignal) {\n              raceOfPromises.push(new Promise(function (resolve, reject) {\n                abortSignal.onabort = function () {\n                  var abortError = new Error(\"Request aborted\");\n                  abortError.name = \"AbortError\";\n                  reject(abortError);\n                };\n              }));\n            }\n            return [2, Promise.race(raceOfPromises)];\n        }\n      });\n    });\n  };\n  return FetchHttpHandler;\n}();\nexport { FetchHttpHandler };","map":{"version":3,"names":["__awaiter","__generator","__values","HttpResponse","buildQueryString","requestTimeout","FetchHttpHandler","options","configProvider","then","opts","config","Promise","resolve","prototype","destroy","handle","request","_a","_b","abortSignal","_c","requestTimeoutInMs","abortError","path","queryString","port","method","url","body","requestOptions","fetchRequest","raceOfPromises","_d","label","sent","aborted","Error","name","reject","query","concat","protocol","hostname","undefined","headers","Headers","AbortController","Request","fetch","response","e_1","fetchHeaders","transformedHeaders","entries","next","done","pair","value","e_1_1","error","return","call","hasReadableStream","blob","statusCode","status","push","onabort","race"],"sources":["/Users/yannellym/Desktop/iwantapet/node_modules/@aws-sdk/client-location/node_modules/@aws-sdk/fetch-http-handler/dist-es/fetch-http-handler.js"],"sourcesContent":["import { __awaiter, __generator, __values } from \"tslib\";\nimport { HttpResponse } from \"@aws-sdk/protocol-http\";\nimport { buildQueryString } from \"@aws-sdk/querystring-builder\";\nimport { requestTimeout } from \"./request-timeout\";\nvar FetchHttpHandler = (function () {\n    function FetchHttpHandler(options) {\n        if (typeof options === \"function\") {\n            this.configProvider = options().then(function (opts) { return opts || {}; });\n        }\n        else {\n            this.config = options !== null && options !== void 0 ? options : {};\n            this.configProvider = Promise.resolve(this.config);\n        }\n    }\n    FetchHttpHandler.prototype.destroy = function () {\n    };\n    FetchHttpHandler.prototype.handle = function (request, _a) {\n        var _b = _a === void 0 ? {} : _a, abortSignal = _b.abortSignal;\n        return __awaiter(this, void 0, void 0, function () {\n            var _c, requestTimeoutInMs, abortError, path, queryString, port, method, url, body, requestOptions, fetchRequest, raceOfPromises;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (!!this.config) return [3, 2];\n                        _c = this;\n                        return [4, this.configProvider];\n                    case 1:\n                        _c.config = _d.sent();\n                        _d.label = 2;\n                    case 2:\n                        requestTimeoutInMs = this.config.requestTimeout;\n                        if (abortSignal === null || abortSignal === void 0 ? void 0 : abortSignal.aborted) {\n                            abortError = new Error(\"Request aborted\");\n                            abortError.name = \"AbortError\";\n                            return [2, Promise.reject(abortError)];\n                        }\n                        path = request.path;\n                        if (request.query) {\n                            queryString = buildQueryString(request.query);\n                            if (queryString) {\n                                path += \"?\".concat(queryString);\n                            }\n                        }\n                        port = request.port, method = request.method;\n                        url = \"\".concat(request.protocol, \"//\").concat(request.hostname).concat(port ? \":\".concat(port) : \"\").concat(path);\n                        body = method === \"GET\" || method === \"HEAD\" ? undefined : request.body;\n                        requestOptions = {\n                            body: body,\n                            headers: new Headers(request.headers),\n                            method: method,\n                        };\n                        if (typeof AbortController !== \"undefined\") {\n                            requestOptions[\"signal\"] = abortSignal;\n                        }\n                        fetchRequest = new Request(url, requestOptions);\n                        raceOfPromises = [\n                            fetch(fetchRequest).then(function (response) {\n                                var e_1, _a;\n                                var fetchHeaders = response.headers;\n                                var transformedHeaders = {};\n                                try {\n                                    for (var _b = __values(fetchHeaders.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                                        var pair = _c.value;\n                                        transformedHeaders[pair[0]] = pair[1];\n                                    }\n                                }\n                                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                                finally {\n                                    try {\n                                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                                    }\n                                    finally { if (e_1) throw e_1.error; }\n                                }\n                                var hasReadableStream = response.body !== undefined;\n                                if (!hasReadableStream) {\n                                    return response.blob().then(function (body) { return ({\n                                        response: new HttpResponse({\n                                            headers: transformedHeaders,\n                                            statusCode: response.status,\n                                            body: body,\n                                        }),\n                                    }); });\n                                }\n                                return {\n                                    response: new HttpResponse({\n                                        headers: transformedHeaders,\n                                        statusCode: response.status,\n                                        body: response.body,\n                                    }),\n                                };\n                            }),\n                            requestTimeout(requestTimeoutInMs),\n                        ];\n                        if (abortSignal) {\n                            raceOfPromises.push(new Promise(function (resolve, reject) {\n                                abortSignal.onabort = function () {\n                                    var abortError = new Error(\"Request aborted\");\n                                    abortError.name = \"AbortError\";\n                                    reject(abortError);\n                                };\n                            }));\n                        }\n                        return [2, Promise.race(raceOfPromises)];\n                }\n            });\n        });\n    };\n    return FetchHttpHandler;\n}());\nexport { FetchHttpHandler };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}